<table class="highlight" *ngIf="atendimentos; else semAtendimentos">
	<thead>
		<tr>
			<th>{{ property | titlecase }}</th>
			<th>Atendimento</th>
			<th class="extended">Estado</th>
			<th class="extended">Parecer Atualizado</th>
		</tr>
	</thead>

	<tbody>
		<tr
				*ngFor="let att of atendimentos"
				[ngClass]="{ 'active': att === atendimentoSelected }"
				(click)="onClick(att)"
				(dblclick)="onDoubleClick(att); atendimentoModal.open()"
				(press)="onPress(att); atendimentoModal.open()">
			<td>
				<input
						type="checkbox"
						class="filled-in"
						[id]="att._id"
						[checked]="att === atendimentoSelected"
						(click)="onSelect(att)">
				<label for="atendimento._id" style="color: black !important">{{ att[property] ? att[property].nome : '(INDEFINIDO)' }}</label>
			</td>
			<td>{{ att.tipo | atendimentoPipe }}</td>
			<td>{{ att.inicio ? (att.egresso ? 'Finalizado' : 'Ativo') : 'Em espera' }} (
					{{ (att.inicio ? (att.egresso ? att.egresso : att.inicio ) : att.solicitacao) | date: 'dd/MM/yyyy' }} )
			</td>
			<td>{{ (att.pareceres.length > 1) ? att.pareceres[att.pareceres.length-1].texto : 'Sem parecer' }}</td>
		</tr>
	</tbody>
</table>

<div class="progress" *ngIf="!isAtendimentosLoaded">
	<div class="indeterminate"></div>
</div>

<ng-template #semAtendimentos>
	<p>Sem Atendimentos</p>
</ng-template>

<app-atendimento-modal
		[showAluno]="showAluno"
		[selectedId]="selectedId"
		[atendimento]="atendimentoSelected"
		(load)="loadAtendimentos()"
		#atendimentoModal></app-atendimento-modal>

<app-delete-confirmation #deleteConfirmModal text="atendimento selecionado" (response)="onDeleteSelected($event)"></app-delete-confirmation>