<div class="row">
	<h5 *ngIf="!create && showAluno && atendimento.aluno" class="light">{{ atendimento ? atendimento.aluno.nome : '' }}</h5>
	<h5 *ngIf="!create && !showAluno && atendimento.profissional" class="light">{{ atendimento ? atendimento.profissional.nome : '' }}</h5>
	<h5 *ngIf="create && showAluno" class="light">{{ aluno ? aluno.nome : '' }}</h5>
	<h5 *ngIf="create && !showAluno" class="light">{{ professor ? professor.nome : '' }}</h5>
	<p>Atendimento
		<span *ngIf="form.get('solicitacao').value && !form.get('inicio').value && !form.get('egresso').value">Em Espera</span>
		<span *ngIf="form.get('inicio').value && !form.get('egresso').value">Ativo</span>
		<span *ngIf="form.get('egresso').value">Finalizado</span>
	</p>
</div>

<form materialize [formGroup]="form" (ngSubmit)="onSave()">
	<div class="row">
		<div class="col s12 l6">
			<div class="input-field">
				<select
						id="selectAtendimento"
						formControlName="tipo"
						materialize="material_select"
						[ngClass]="{ 'invalid': form.get('tipo').invalid && submitted }">
					<option value="" disabled selected>Tipo de Atendimento</option>
					<option *ngFor="let tipo of tipos" [value]="tipo.value">{{ tipo.name }}</option>
				</select>
				<label>Atendimento*</label>
			</div>
		</div>

		<div class="col s12 l6">
			<div class="input-field">
				<input
					id="selectSolicitacao"
					formControlName="solicitacao"
					type="text"
					materialize="pickadate"
					[materializeParams]="datepickerParams">
				<label for="selectSolicitacao">Solicitação</label>
			</div>
		</div>

		<div class="col s12 l6">
			<div class="input-field">
				<input
					id="selectInicio"
					formControlName="inicio"
					type="text"
					materialize="pickadate"
					[materializeParams]="datepickerParams">
				<label for="selectInicio">Início</label>
			</div>
		</div>

		<div class="col s12 l6">
			<div class="input-field">
				<input
					id="selectEgresso"
					formControlName="egresso"
					type="text"
					materialize="pickadate"
					[materializeParams]="datepickerParams">
				<label for="selectEgresso">Egresso</label>
			</div>
		</div>

		<div *ngIf="form.get('inicio').value">
			<div class="col s12 l6">
				<div class="input-field">
					<select
							id="selectAtendimento"
							formControlName="tipo"
							materialize="material_select"
							[ngClass]="{ 'invalid': form.get('tipo').invalid && submitted }">
						<option value="" disabled selected>Tipo de Atendimento</option>
						<option *ngFor="let tipo of tipos" [value]="tipo.value">{{ tipo.name }}</option>
					</select>
					<label>Turno</label>
				</div>
			</div>

		</div>
		<div *ngIf="form.get('turno')">
			<div class="col s6 l3">
				<div class="input-field">
					<select
							id="selectAtendimento"
							formControlName="tipo"
							materialize="material_select"
							[ngClass]="{ 'invalid': form.get('tipo').invalid && submitted }">
						<option value="" disabled selected>Tipo de Atendimento</option>
						<option *ngFor="let tipo of tipos" [value]="tipo.value">{{ tipo.name }}</option>
					</select>
					<label>Hora</label>
				</div>
			</div>

			<div class="col s6 l3">
				<div class="input-field">
					<select
							id="selectAtendimento"
							formControlName="tipo"
							materialize="material_select"
							[ngClass]="{ 'invalid': form.get('tipo').invalid && submitted }">
						<option value="" disabled selected>Tipo de Atendimento</option>
						<option *ngFor="let tipo of tipos" [value]="tipo.value">{{ tipo.name }}</option>
					</select>
					<label>Minutos</label>
				</div>
			</div>
		</div>

	</div>

	<div class="row">
		<p>Pareceres
			<button
					type="button"
					class="btn-floating simple tooltipped"
					materialize="tooltip"
					data-position="top"
					data-ldelay="50"
					data-tooltip="Novo Parecer"
					(click)="addParecer()">
				<i class="material-icons">add</i>
			</button>
		</p>
		<!-- <p *ngIf="form.get()"></p> -->
		<div formArrayName="pareceres">
			<div *ngFor="let parecer of pareceres.controls; let i = index;">
				<div [formGroupName]="i">
					<div class="input-field col s12" style="margin: 0px;">
						<button type="button" class="btn-floating simple postfix" (click)="removeParecer(i)">
							<i class="material-icons">close</i>
						</button>
						<textarea
								[id]="'texto' + i"
								formControlName="texto"
								class="materialize-textarea"
								style="margin: 0;"
								autocomplete="false"></textarea>
					</div>
					<label class="col s12" [for]="'texto' + i">{{ parecer.get('data').value | date: 'dd/MM/yyyy' }}</label>
				</div>
			</div>
		</div>
	</div>

</form>

<app-delete-confirmation #deleteConfirmModal class="black-text" text="atendimento" (response)="onDelete($event)"></app-delete-confirmation>